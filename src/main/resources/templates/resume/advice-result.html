<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layout/layout.html}">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/daisyui@2.51.6/dist/full.css" rel="stylesheet" type="text/css"/>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2/dist/tailwind.min.css" rel="stylesheet" type="text/css"/>

    <title>ê°œì„  ëª©ë¡</title>
</head>
<body>

<main layout:fragment="main" class="flex justify-center items-center h-auto mt-16">

    <script>
        function downloadText() {
            var elements = document.querySelectorAll(".improvementPoint, .advice");
            var txtData = '';
            for (var i = 0; i < elements.length; i++) {
                txtData += elements[i].textContent + '\n';
            }

            var blob = new Blob([txtData], {type: 'text/plain'});
            var url = URL.createObjectURL(blob);

            var link = document.createElement('a');
            link.download = 'advice.txt';
            link.href = url;

            link.click();
        }
    </script>

    <div class="w-full max-w-2xl mx-auto">
        <h1 class="text-2xl mb-6">ğŸ“© ì´ëŸ° ì ì„ ê°œì„ í•˜ë©´ ë” ì¢‹ì•„ìš”</h1>

        <div th:each="improveResponse, iterStat : ${improveResponses}">
            <div th:if="${iterStat.index % 3 == 0}" class="mt-6">
                <h2 class="text-xl mb-2" th:text="'ìš”ì²­ ' + (${iterStat.index/3} + 1)">ìš”ì²­ 1</h2>
                <hr class="mb-4"/>
            </div>

            <div class="border-t-2 py-6">
                <h3 class="text-2xl mb-2 improvementPoint" th:text="${improveResponse.improvementPoint()}">Question</h3>
                <p class="advice" th:text="${improveResponse.advice()}">Best answer</p>
            </div>
        </div>

        <button type="button" onClick="downloadText()" className="mt-8">í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ ì €ì¥í•˜ê¸°</button>
    </div>
</main>
</body>
</html>
